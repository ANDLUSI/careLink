<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>contact</title>

    <!-- favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="assets/images/favicon/site.webmanifest">

    <!-- plugins styles -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Baloo+2:400,500,600,700,800%7CLato:100,300,400,700,900%7COpen+Sans:300,400,600,700,800%7CRoboto:300,400,500,700,900%7CRubik:300,400,500,700,900&display=swap">
    <link rel="stylesheet" href="assets/css/animate.css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/bootstrap-datepicker.min.css">
    <link rel="stylesheet" href="assets/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="assets/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="assets/css/hover-min.css">
    <link rel="stylesheet" href="assets/css/swiper.min.css">
    <link rel="stylesheet" href="assets/css/jquery.mCustomScrollbar.min.css">
    <link rel="stylesheet" href="assets/css/magnific-popup.css">
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/css/owl.theme.default.min.css">
    <link rel="stylesheet" href="assets/css/oberlin-icons.css">

    <!-- template styles -->
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
    <link rel="stylesheet" href="assets/css/contact.css">

</head>

<body>

    <div class="preloader">
        <div class="lds-ripple">
            <div></div>
            <div></div>
        </div>
    </div><!-- /.preloader -->

    <div class="page-wrapper">

        <nav class="main-nav-one stricky">
            <div class="container">
                <div class="inner-container">
                    <div class="logo-box">
                        <a href="index.html">
                            <img src="assets/images/logo.png" alt="" width="219">
                        </a>
                        <a href="#" class="side-menu__toggler"><i class="fa fa-bars"></i></a>
                    </div><!-- /.logo-box -->
                    <div class="main-nav__main-navigation">
                        <ul class="main-nav__navigation-box">
                            <li class="dropdown">
                                <a href="index.html">首页</a>
                            </li>
                            <li class="dropdown">
                                <a href="about-1.html">设施介绍</a>
                            </li>
                            <li class="dropdown">
                                <a href="services1.html">服务介绍</a>
                            </li>
                            <li class="dropdown">
                                <a href="#">志愿活动</a>
                                <ul>
                                    <li><a href="story.html">志愿活动</a></li>
                                    <li><a href="career.html">志愿者申请入口</a></li>
                                </ul>
                            </li>
                            <li><a href="contact.html">在线咨询</a></li>
                        </ul><!-- /.main-nav__navigation-box -->
                    </div><!-- /.main-nav__main-navigation -->
                    <div class="main-nav__right">
                        <a href="login.html" class="thm-btn main-nav-one__btn login_and_center">
                            <i class="far fa-clock"></i>
                            登录/注册
                        </a>
                            <!-- /.thm-btn main-nav-one__btn -->
                    </div><!-- /.main-nav__right -->
                </div><!-- /.inner-container -->
            </div><!-- /.container -->
        </nav><!-- /.main-nav-one -->

        <section class="page-header" style="background-image: url(assets/images/background/page-header-bg-1-1.jpg);">
            <div class="container">
                <h2>电话：023-68051683</h2>
                <h2>手机1：13983139696</h2>
                <h2>手机2：15723431030</h2>
                <ul class="list-unstyled thm-breadcrumb">
                    <li><a href="index.html">主页</a></li>
                    <li><span>联系我们</span></li>
                </ul><!-- /.list-unstyled -->
            </div><!-- /.container -->
        </section><!-- /.page-header -->



        <!-- 聊天框部分 -->
        <div class="background_big_chat">
            <div class="chat_online">
                <!-- 左侧列表 -->
                <div class="chat_online_left">
                    <!-- 左侧内容 -->
                </div>
                <div class="chat_online_right1">
                    <!-- 聊天视图 -->
                    <div class="chat_view">
                        <div class="messages">
                            <div class="message user-message">你好</div>
                            <div class="message ai-message">你好！有什么可以帮助你的吗？</div>
                        </div>
                    </div>
                    <div class="chat_input_div">
                        <textarea id="chat_input"></textarea>
                        <div class="send_btn"></div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /.container -->
    

    </div><!-- /.page-wrapper -->

    <a href="#" data-target="html" class="scroll-to-target scroll-to-top"><i class="fa fa-angle-up"></i></a>

    <div class="side-menu__block">

        <a href="#" class="side-menu__toggler side-menu__close-btn"><i class="fa fa-times"></i>
            <!-- /.fa fa-close --></a>

        <div class="side-menu__block-overlay custom-cursor__overlay">
            <div class="cursor"></div>
            <div class="cursor-follower"></div>
        </div><!-- /.side-menu__block-overlay -->
        <div class="side-menu__block-inner ">

            <a href="index.html" class="side-menu__logo"><img src="assets/images/light-logo-1-1.png" alt=""
                    width="190"></a>
            <nav class="mobile-nav__container">
                <!-- content is loading via js -->
            </nav>
            <p class="side-menu__block__copy">Copyright &copy; 2021.Company name All rights reserved.<a target="_blank" href="https://sc.chinaz.com/moban/">&#x7F51;&#x9875;&#x6A21;&#x677F;</a></p>
        </div><!-- /.side-menu__block-inner -->
    </div><!-- /.side-menu__block -->

    <!-- template scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/bootstrap-datepicker.min.js"></script>
    <script src="assets/js/bootstrap-select.min.js"></script>
    <script src="assets/js/isotope.js"></script>
    <script src="assets/js/jquery.ajaxchimp.min.js"></script>
    <script src="assets/js/jquery.circleType.js"></script>
    <script src="assets/js/waypoints.min.js"></script>
    <script src="assets/js/jquery.counterup.min.js"></script>
    <script src="assets/js/jquery.lettering.min.js"></script>
    <script src="assets/js/jquery.magnific-popup.min.js"></script>
    <script src="assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="assets/js/jquery.validate.min.js"></script>
    <script src="assets/js/owl.carousel.min.js"></script>
    <script src="assets/js/TweenMax.min.js"></script>
    <script src="assets/js/wow.min.js"></script>
    <script src="assets/js/theme.js"></script>

<script>
$(document).ready(function() {

    //页面加载获取当前用户名
    var userId = sessionStorage.getItem("userId");
    if(userId){
        $(".login_and_center").text("个人中心")
        $(".login_and_center").attr("href","personal-center.html")
    }

    const chatInput = $('#chat_input');
    const sendBtn = $('.send_btn');
    const messagesContainer = $('.messages');

    sendBtn.click(sendMessage);
    chatInput.keydown(function(event) {
        if (event.key === 'Enter' && !event.shiftKey) {
            event.preventDefault(); // 防止默认行为（换行）
            sendMessage();
        } else if (event.key === 'Enter' && event.shiftKey) {
            event.preventDefault(); // 防止默认行为（换行）
            chatInput.val(chatInput.val() + '\n'); // 手动插入换行符
        }
    });

    function sendMessage() {
        // 用户消息
        const messageText = chatInput.val().trim();
        // 当消息框不为空时才能发送
        if (messageText !== '') {
            // 添加用户消息
            const userMessage = $('<div>', {
                class: 'message user-message',
                text: messageText
            });
            messagesContainer.append(userMessage);

            // 添加等待中的回复
            const loadingMessage = $('<div>', {
                class: 'message ai-message',
                text: '健康小助手正在组织语言...'
            });
            messagesContainer.append(loadingMessage);

            // 发起 AJAX 请求
            $.ajax({
                url: "http://localhost/UserController/message", 
                method: 'POST', 
                data: {
                    message: messageText
                },
                success: function(resp) {
                    // 更新等待中的回复为实际的回复
                    loadingMessage.text(resp.data);
                    // 滚动到底部
                    $('.chat_view').scrollTop($('.chat_view')[0].scrollHeight);
                },
                error: function() {
                    // 如果请求失败，显示错误消息
                    loadingMessage.text('网络出现问题啦~请重试');
                }
            });

            // 滚动到底部
            $('.chat_view').scrollTop($('.chat_view')[0].scrollHeight);

            // 清空输入框
            chatInput.val('');
        }
    }
});
</script>
</body>

</html>